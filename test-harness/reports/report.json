{"created": 1752555611.187216, "duration": 2.9853334426879883, "exitcode": 1, "root": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness", "environment": {}, "summary": {"failed": 39, "passed": 4, "total": 43, "collected": 43}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests/test_database.py", "type": "Module"}, {"nodeid": "tests/test_edge_cases.py", "type": "Module"}, {"nodeid": "tests/test_rest_api.py", "type": "Module"}, {"nodeid": "tests/test_themes_api.py", "type": "Module"}, {"nodeid": "tests/test_untested_scenarios.py", "type": "Module"}, {"nodeid": "tests/test_websockets.py", "type": "Module"}]}, {"nodeid": "tests/test_database.py", "outcome": "passed", "result": [{"nodeid": "tests/test_database.py::test_sqlite_event_storage", "type": "Function", "lineno": 17}, {"nodeid": "tests/test_database.py::test_postgres_event_storage", "type": "Function", "lineno": 55}, {"nodeid": "tests/test_database.py::test_mongo_event_storage", "type": "Function", "lineno": 87}, {"nodeid": "tests/test_database.py::test_event_count_increment", "type": "Function", "lineno": 113}]}, {"nodeid": "tests/test_edge_cases.py", "outcome": "passed", "result": [{"nodeid": "tests/test_edge_cases.py::test_invalid_event_missing_fields", "type": "Function", "lineno": 5}, {"nodeid": "tests/test_edge_cases.py::test_malformed_json", "type": "Function", "lineno": 44}, {"nodeid": "tests/test_edge_cases.py::test_recent_events_with_limit", "type": "Function", "lineno": 53}, {"nodeid": "tests/test_edge_cases.py::test_cors_headers", "type": "Function", "lineno": 71}, {"nodeid": "tests/test_edge_cases.py::test_unsupported_methods", "type": "Function", "lineno": 80}, {"nodeid": "tests/test_edge_cases.py::test_large_payload", "type": "Function", "lineno": 98}, {"nodeid": "tests/test_edge_cases.py::test_special_characters", "type": "Function", "lineno": 112}, {"nodeid": "tests/test_edge_cases.py::test_empty_payload", "type": "Function", "lineno": 129}, {"nodeid": "tests/test_edge_cases.py::test_concurrent_requests", "type": "Function", "lineno": 142}, {"nodeid": "tests/test_edge_cases.py::test_performance_timing", "type": "Function", "lineno": 174}, {"nodeid": "tests/test_edge_cases.py::test_null_payload", "type": "Function", "lineno": 192}, {"nodeid": "tests/test_edge_cases.py::test_invalid_hook_event_type", "type": "Function", "lineno": 204}, {"nodeid": "tests/test_edge_cases.py::test_extremely_large_payload", "type": "Function", "lineno": 216}, {"nodeid": "tests/test_edge_cases.py::test_invalid_content_type", "type": "Function", "lineno": 229}, {"nodeid": "tests/test_edge_cases.py::test_nested_json_payload", "type": "Function", "lineno": 242}, {"nodeid": "tests/test_edge_cases.py::test_pagination_with_offset", "type": "Function", "lineno": 268}, {"nodeid": "tests/test_edge_cases.py::test_database_connection_error", "type": "Function", "lineno": 294}]}, {"nodeid": "tests/test_rest_api.py", "outcome": "passed", "result": [{"nodeid": "tests/test_rest_api.py::test_root_endpoint", "type": "Function", "lineno": 4}, {"nodeid": "tests/test_rest_api.py::test_event_endpoint", "type": "Function", "lineno": 11}, {"nodeid": "tests/test_rest_api.py::test_recent_events_endpoint", "type": "Function", "lineno": 30}, {"nodeid": "tests/test_rest_api.py::test_filter_options_endpoint", "type": "Function", "lineno": 37}]}, {"nodeid": "tests/test_themes_api.py", "outcome": "passed", "result": [{"nodeid": "tests/test_themes_api.py::test_create_theme", "type": "Function", "lineno": 6}, {"nodeid": "tests/test_themes_api.py::test_get_theme", "type": "Function", "lineno": 32}, {"nodeid": "tests/test_themes_api.py::test_search_themes", "type": "Function", "lineno": 45}, {"nodeid": "tests/test_themes_api.py::test_update_theme", "type": "Function", "lineno": 54}, {"nodeid": "tests/test_themes_api.py::test_delete_theme", "type": "Function", "lineno": 75}, {"nodeid": "tests/test_themes_api.py::test_export_theme", "type": "Function", "lineno": 87}, {"nodeid": "tests/test_themes_api.py::test_import_theme", "type": "Function", "lineno": 100}, {"nodeid": "tests/test_themes_api.py::test_theme_stats", "type": "Function", "lineno": 119}, {"nodeid": "tests/test_themes_api.py::test_theme_validation", "type": "Function", "lineno": 127}, {"nodeid": "tests/test_themes_api.py::test_theme_not_found", "type": "Function", "lineno": 141}]}, {"nodeid": "tests/test_untested_scenarios.py", "outcome": "passed", "result": [{"nodeid": "tests/test_untested_scenarios.py::test_ratelimit_429", "type": "Function", "lineno": 7}, {"nodeid": "tests/test_untested_scenarios.py::test_ws_broadcast_multiple_clients", "type": "Function", "lineno": 22}, {"nodeid": "tests/test_untested_scenarios.py::test_graceful_shutdown_with_clients", "type": "Function", "lineno": 47}]}, {"nodeid": "tests/test_websockets.py", "outcome": "passed", "result": [{"nodeid": "tests/test_websockets.py::test_websocket_connection", "type": "Function", "lineno": 6}, {"nodeid": "tests/test_websockets.py::test_websocket_receives_events", "type": "Function", "lineno": 21}, {"nodeid": "tests/test_websockets.py::test_websocket_multiple_clients_broadcast", "type": "Function", "lineno": 56}, {"nodeid": "tests/test_websockets.py::test_websocket_client_disconnect", "type": "Function", "lineno": 101}, {"nodeid": "tests/test_websockets.py::test_websocket_connection_timeout", "type": "Function", "lineno": 131}]}], "tests": [{"nodeid": "tests/test_database.py::test_sqlite_event_storage", "lineno": 17, "outcome": "failed", "keywords": ["test_sqlite_event_storage", "db", "pytestmark", "tests/test_database.py", "test-harness"], "setup": {"duration": 0.0001523569990240503, "outcome": "passed"}, "call": {"duration": 0.0038344570020854007, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 28, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_database.py", "lineno": 28, "message": "in test_sqlite_event_storage"}], "longrepr": "tests/test_database.py:28: in test_sqlite_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.00014447200010181405, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::test_postgres_event_storage", "lineno": 55, "outcome": "failed", "keywords": ["test_postgres_event_storage", "skipif", "db", "pytestmark", "tests/test_database.py", "test-harness"], "setup": {"duration": 0.00014557900067302398, "outcome": "passed"}, "call": {"duration": 0.0028973469998163637, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 67, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_database.py", "lineno": 67, "message": "in test_postgres_event_storage"}], "longrepr": "tests/test_database.py:67: in test_postgres_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.00012672699813265353, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::test_mongo_event_storage", "lineno": 87, "outcome": "failed", "keywords": ["test_mongo_event_storage", "skipif", "db", "pytestmark", "tests/test_database.py", "test-harness"], "setup": {"duration": 0.00012026599870296195, "outcome": "passed"}, "call": {"duration": 0.003095829000812955, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 99, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_database.py", "lineno": 99, "message": "in test_mongo_event_storage"}], "longrepr": "tests/test_database.py:99: in test_mongo_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.0004914720011583995, "outcome": "passed"}}, {"nodeid": "tests/test_database.py::test_event_count_increment", "lineno": 113, "outcome": "failed", "keywords": ["test_event_count_increment", "db", "pytestmark", "tests/test_database.py", "test-harness"], "setup": {"duration": 0.0002993769994645845, "outcome": "passed"}, "call": {"duration": 0.007566575000964804, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 128, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_database.py", "lineno": 128, "message": "in test_event_count_increment"}], "longrepr": "tests/test_database.py:128: in test_event_count_increment\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.00017496700093033724, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_invalid_event_missing_fields", "lineno": 5, "outcome": "failed", "keywords": ["test_invalid_event_missing_fields", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00035990600008517504, "outcome": "passed"}, "call": {"duration": 0.006725395000103163, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 15, "message": "assert 422 == 400\n +  where 422 = <Response [422]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 15, "message": "in test_invalid_event_missing_fields"}], "longrepr": "tests/test_edge_cases.py:15: in test_invalid_event_missing_fields\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code"}, "teardown": {"duration": 0.0001384050010528881, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_malformed_json", "lineno": 44, "outcome": "failed", "keywords": ["test_malformed_json", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00011178899876540527, "outcome": "passed"}, "call": {"duration": 0.0023106900007405784, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 51, "message": "assert 422 == 400\n +  where 422 = <Response [422]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 51, "message": "in test_malformed_json"}], "longrepr": "tests/test_edge_cases.py:51: in test_malformed_json\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code"}, "teardown": {"duration": 0.0006293340011325199, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_recent_events_with_limit", "lineno": 53, "outcome": "passed", "keywords": ["test_recent_events_with_limit", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.0002806150005199015, "outcome": "passed"}, "call": {"duration": 0.026311639001505682, "outcome": "passed"}, "teardown": {"duration": 0.0001110459998017177, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_cors_headers", "lineno": 71, "outcome": "failed", "keywords": ["test_cors_headers", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00011938500028918497, "outcome": "passed"}, "call": {"duration": 0.005521356000826927, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 77, "message": "AssertionError: assert 'Access-Control-Allow-Origin' in {'date': 'Tue, 15 Jul 2025 05:00:08 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'}\n +  where {'date': 'Tue, 15 Jul 2025 05:00:08 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'} = <Response [200]>.headers"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 77, "message": "in test_cors_headers"}], "longrepr": "tests/test_edge_cases.py:77: in test_cors_headers\n    assert \"Access-Control-Allow-Origin\" in response.headers\nE   AssertionError: assert 'Access-Control-Allow-Origin' in {'date': 'Tue, 15 Jul 2025 05:00:08 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'}\nE    +  where {'date': 'Tue, 15 Jul 2025 05:00:08 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'} = <Response [200]>.headers"}, "teardown": {"duration": 0.00021228500190773048, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_unsupported_methods", "lineno": 80, "outcome": "failed", "keywords": ["test_unsupported_methods", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.0001508210007159505, "outcome": "passed"}, "call": {"duration": 0.002508973000658443, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 91, "message": "assert 405 == 200\n +  where 405 = <Response [405]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 91, "message": "in test_unsupported_methods"}], "longrepr": "tests/test_edge_cases.py:91: in test_unsupported_methods\n    assert response.status_code == 200  # Server returns default response\nE   assert 405 == 200\nE    +  where 405 = <Response [405]>.status_code"}, "teardown": {"duration": 0.0004621679981937632, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_large_payload", "lineno": 98, "outcome": "failed", "keywords": ["test_large_payload", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00016521299767191522, "outcome": "passed"}, "call": {"duration": 0.0036607949987228494, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 109, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 109, "message": "in test_large_payload"}], "longrepr": "tests/test_edge_cases.py:109: in test_large_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.0001840350014390424, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_special_characters", "lineno": 112, "outcome": "failed", "keywords": ["test_special_characters", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00012009399870294146, "outcome": "passed"}, "call": {"duration": 0.008050194999668747, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 126, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 126, "message": "in test_special_characters"}], "longrepr": "tests/test_edge_cases.py:126: in test_special_characters\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.0001751670024532359, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_empty_payload", "lineno": 129, "outcome": "failed", "keywords": ["test_empty_payload", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.0001591440013726242, "outcome": "passed"}, "call": {"duration": 0.0035612749998108484, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 139, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 139, "message": "in test_empty_payload"}], "longrepr": "tests/test_edge_cases.py:139: in test_empty_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.00018443199951434508, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_concurrent_requests", "lineno": 142, "outcome": "failed", "keywords": ["test_concurrent_requests", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00015099499796633609, "outcome": "passed"}, "call": {"duration": 0.024188638999476098, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 172, "message": "assert False\n +  where False = all(<generator object test_concurrent_requests.<locals>.<genexpr> at 0x7fdeadfa2400>)"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 172, "message": "in test_concurrent_requests"}], "longrepr": "tests/test_edge_cases.py:172: in test_concurrent_requests\n    assert all(status == 200 for status in results)\nE   assert False\nE    +  where False = all(<generator object test_concurrent_requests.<locals>.<genexpr> at 0x7fdeadfa2400>)"}, "teardown": {"duration": 0.00014136599929770455, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_performance_timing", "lineno": 174, "outcome": "failed", "keywords": ["test_performance_timing", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00011048899978050031, "outcome": "passed"}, "call": {"duration": 0.002815967000060482, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 189, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 189, "message": "in test_performance_timing"}], "longrepr": "tests/test_edge_cases.py:189: in test_performance_timing\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.0005177550010557752, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_null_payload", "lineno": 192, "outcome": "failed", "keywords": ["test_null_payload", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.000238235999859171, "outcome": "passed"}, "call": {"duration": 0.003413458998693386, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 203, "message": "assert 422 in [200, 400]\n +  where 422 = <Response [422]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 203, "message": "in test_null_payload"}], "longrepr": "tests/test_edge_cases.py:203: in test_null_payload\n    assert response.status_code in [200, 400]\nE   assert 422 in [200, 400]\nE    +  where 422 = <Response [422]>.status_code"}, "teardown": {"duration": 0.00012544399942271411, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_invalid_hook_event_type", "lineno": 204, "outcome": "passed", "keywords": ["test_invalid_hook_event_type", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00012842500291299075, "outcome": "passed"}, "call": {"duration": 0.0029281989991432056, "outcome": "passed"}, "teardown": {"duration": 0.0001577119983267039, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_extremely_large_payload", "lineno": 216, "outcome": "failed", "keywords": ["test_extremely_large_payload", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00020215200129314326, "outcome": "passed"}, "call": {"duration": 0.05556776700177579, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 228, "message": "assert 400 in [200, 413]\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 228, "message": "in test_extremely_large_payload"}], "longrepr": "tests/test_edge_cases.py:228: in test_extremely_large_payload\n    assert response.status_code in [200, 413]\nE   assert 400 in [200, 413]\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.00013193899940233678, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_invalid_content_type", "lineno": 229, "outcome": "failed", "keywords": ["test_invalid_content_type", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00012020799840684049, "outcome": "passed"}, "call": {"duration": 0.00215715499871294, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 241, "message": "assert 422 == 400\n +  where 422 = <Response [422]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 241, "message": "in test_invalid_content_type"}], "longrepr": "tests/test_edge_cases.py:241: in test_invalid_content_type\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code"}, "teardown": {"duration": 0.0001398010026605334, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_nested_json_payload", "lineno": 242, "outcome": "failed", "keywords": ["test_nested_json_payload", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00011214500045753084, "outcome": "passed"}, "call": {"duration": 0.002628974998515332, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 265, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 265, "message": "in test_nested_json_payload"}], "longrepr": "tests/test_edge_cases.py:265: in test_nested_json_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.0005392890016082674, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_pagination_with_offset", "lineno": 268, "outcome": "failed", "keywords": ["test_pagination_with_offset", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.0004249539997545071, "outcome": "passed"}, "call": {"duration": 0.058615843001462054, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 293, "message": "AssertionError: assert {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 273, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...} != {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 273, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...}"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 293, "message": "in test_pagination_with_offset"}], "longrepr": "tests/test_edge_cases.py:293: in test_pagination_with_offset\n    assert events1[0] != events2[0]\nE   AssertionError: assert {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 273, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...} != {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 273, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...}"}, "teardown": {"duration": 0.0003808879991993308, "outcome": "passed"}}, {"nodeid": "tests/test_edge_cases.py::test_database_connection_error", "lineno": 294, "outcome": "failed", "keywords": ["test_database_connection_error", "rest", "pytestmark", "tests/test_edge_cases.py", "test-harness"], "setup": {"duration": 0.00011200199878658168, "outcome": "passed"}, "call": {"duration": 0.003001318000315223, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 307, "message": "assert 400 in [200, 500]\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_edge_cases.py", "lineno": 307, "message": "in test_database_connection_error"}], "longrepr": "tests/test_edge_cases.py:307: in test_database_connection_error\n    assert response.status_code in [200, 500]\nE   assert 400 in [200, 500]\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.00012605799929588102, "outcome": "passed"}}, {"nodeid": "tests/test_rest_api.py::test_root_endpoint", "lineno": 4, "outcome": "failed", "keywords": ["test_root_endpoint", "rest", "pytestmark", "tests/test_rest_api.py", "test-harness"], "setup": {"duration": 0.00011080799959017895, "outcome": "passed"}, "call": {"duration": 0.004551145997538697, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py", "lineno": 10, "message": "assert '\"Multi-Agent...ility Server\"' == 'Multi-Agent ...bility Server'\n  - Multi-Agent Observability Server\n  + \"Multi-Agent Observability Server\"\n  ? +                                +"}, "traceback": [{"path": "tests/test_rest_api.py", "lineno": 10, "message": "in test_root_endpoint"}], "longrepr": "tests/test_rest_api.py:10: in test_root_endpoint\n    assert response.text == \"Multi-Agent Observability Server\"\nE   assert '\"Multi-Agent...ility Server\"' == 'Multi-Agent ...bility Server'\nE     - Multi-Agent Observability Server\nE     + \"Multi-Agent Observability Server\"\nE     ? +                                +"}, "teardown": {"duration": 0.00015978399824234657, "outcome": "passed"}}, {"nodeid": "tests/test_rest_api.py::test_event_endpoint", "lineno": 11, "outcome": "failed", "keywords": ["test_event_endpoint", "rest", "pytestmark", "tests/test_rest_api.py", "test-harness"], "setup": {"duration": 0.00011377600094419904, "outcome": "passed"}, "call": {"duration": 0.0029279019981913734, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py", "lineno": 24, "message": "assert 400 == 200\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_rest_api.py", "lineno": 24, "message": "in test_event_endpoint"}], "longrepr": "tests/test_rest_api.py:24: in test_event_endpoint\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.00011285299842711538, "outcome": "passed"}}, {"nodeid": "tests/test_rest_api.py::test_recent_events_endpoint", "lineno": 30, "outcome": "passed", "keywords": ["test_recent_events_endpoint", "rest", "pytestmark", "tests/test_rest_api.py", "test-harness"], "setup": {"duration": 0.00013387500075623393, "outcome": "passed"}, "call": {"duration": 0.07036394199894858, "outcome": "passed"}, "teardown": {"duration": 0.00011498100138851441, "outcome": "passed"}}, {"nodeid": "tests/test_rest_api.py::test_filter_options_endpoint", "lineno": 37, "outcome": "passed", "keywords": ["test_filter_options_endpoint", "rest", "pytestmark", "tests/test_rest_api.py", "test-harness"], "setup": {"duration": 0.00010698000187403522, "outcome": "passed"}, "call": {"duration": 0.0019162259995937347, "outcome": "passed"}, "teardown": {"duration": 0.00010008199751609936, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_create_theme", "lineno": 6, "outcome": "failed", "keywords": ["test_create_theme", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.00010735800242400728, "outcome": "passed"}, "call": {"duration": 0.0017725529978633858, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 26, "message": "assert 404 == 201\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 26, "message": "in test_create_theme"}], "longrepr": "tests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.00012603499999386258, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_get_theme", "lineno": 32, "outcome": "failed", "keywords": ["test_get_theme", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.00011063300189562142, "outcome": "passed"}, "call": {"duration": 0.0019938969999202527, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 26, "message": "assert 404 == 201\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 37, "message": "in test_get_theme"}, {"path": "tests/test_themes_api.py", "lineno": 26, "message": "in test_create_theme"}], "longrepr": "tests/test_themes_api.py:37: in test_get_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.00017487999866716564, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_search_themes", "lineno": 45, "outcome": "failed", "keywords": ["test_search_themes", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.00011318900214973837, "outcome": "passed"}, "call": {"duration": 0.002135801998520037, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 50, "message": "assert 404 == 200\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 50, "message": "in test_search_themes"}], "longrepr": "tests/test_themes_api.py:50: in test_search_themes\n    assert response.status_code == 200\nE   assert 404 == 200\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.00015285200061043724, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_update_theme", "lineno": 54, "outcome": "failed", "keywords": ["test_update_theme", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.0001119720000133384, "outcome": "passed"}, "call": {"duration": 0.002028167000389658, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 26, "message": "assert 404 == 201\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 59, "message": "in test_update_theme"}, {"path": "tests/test_themes_api.py", "lineno": 26, "message": "in test_create_theme"}], "longrepr": "tests/test_themes_api.py:59: in test_update_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.00013567100177169777, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_delete_theme", "lineno": 75, "outcome": "failed", "keywords": ["test_delete_theme", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.0001100369991036132, "outcome": "passed"}, "call": {"duration": 0.0019998589996248484, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 26, "message": "assert 404 == 201\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 80, "message": "in test_delete_theme"}, {"path": "tests/test_themes_api.py", "lineno": 26, "message": "in test_create_theme"}], "longrepr": "tests/test_themes_api.py:80: in test_delete_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.0005097659995954018, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_export_theme", "lineno": 87, "outcome": "failed", "keywords": ["test_export_theme", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.0003005540020240005, "outcome": "passed"}, "call": {"duration": 0.0019952670008933637, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 26, "message": "assert 404 == 201\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 92, "message": "in test_export_theme"}, {"path": "tests/test_themes_api.py", "lineno": 26, "message": "in test_create_theme"}], "longrepr": "tests/test_themes_api.py:92: in test_export_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.0001278550007555168, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_import_theme", "lineno": 100, "outcome": "failed", "keywords": ["test_import_theme", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.00015175199951045215, "outcome": "passed"}, "call": {"duration": 0.002637437002704246, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 26, "message": "assert 404 == 201\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 105, "message": "in test_import_theme"}, {"path": "tests/test_themes_api.py", "lineno": 26, "message": "in test_create_theme"}], "longrepr": "tests/test_themes_api.py:105: in test_import_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.0005240360005700495, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_theme_stats", "lineno": 119, "outcome": "failed", "keywords": ["test_theme_stats", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.00012295800115680322, "outcome": "passed"}, "call": {"duration": 0.001954458002728643, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 124, "message": "assert 404 == 200\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 124, "message": "in test_theme_stats"}], "longrepr": "tests/test_themes_api.py:124: in test_theme_stats\n    assert response.status_code == 200\nE   assert 404 == 200\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.00012403499931679107, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_theme_validation", "lineno": 127, "outcome": "failed", "keywords": ["test_theme_validation", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.000106458999653114, "outcome": "passed"}, "call": {"duration": 0.0019243410024500918, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 138, "message": "assert 404 == 400\n +  where 404 = <Response [404]>.status_code"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 138, "message": "in test_theme_validation"}], "longrepr": "tests/test_themes_api.py:138: in test_theme_validation\n    assert response.status_code == 400\nE   assert 404 == 400\nE    +  where 404 = <Response [404]>.status_code"}, "teardown": {"duration": 0.0004151700013608206, "outcome": "passed"}}, {"nodeid": "tests/test_themes_api.py::test_theme_not_found", "lineno": 141, "outcome": "failed", "keywords": ["test_theme_not_found", "rest", "pytestmark", "tests/test_themes_api.py", "test-harness"], "setup": {"duration": 0.0002855399980035145, "outcome": "passed"}, "call": {"duration": 0.005053588000009768, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 148, "message": "KeyError: 'success'"}, "traceback": [{"path": "tests/test_themes_api.py", "lineno": 148, "message": "in test_theme_not_found"}], "longrepr": "tests/test_themes_api.py:148: in test_theme_not_found\n    assert response_data[\"success\"] is False\nE   KeyError: 'success'"}, "teardown": {"duration": 0.0001195030017697718, "outcome": "passed"}}, {"nodeid": "tests/test_untested_scenarios.py::test_ratelimit_429", "lineno": 7, "outcome": "failed", "keywords": ["test_ratelimit_429", "rest", "pytestmark", "tests/test_untested_scenarios.py", "test-harness"], "setup": {"duration": 0.00010671899872249924, "outcome": "passed"}, "call": {"duration": 0.07206131299972185, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_untested_scenarios.py", "lineno": 21, "message": "assert 400 == 429\n +  where 400 = <Response [400]>.status_code"}, "traceback": [{"path": "tests/test_untested_scenarios.py", "lineno": 21, "message": "in test_ratelimit_429"}], "longrepr": "tests/test_untested_scenarios.py:21: in test_ratelimit_429\n    assert response.status_code == 429\nE   assert 400 == 429\nE    +  where 400 = <Response [400]>.status_code"}, "teardown": {"duration": 0.000472126997919986, "outcome": "passed"}}, {"nodeid": "tests/test_untested_scenarios.py::test_ws_broadcast_multiple_clients", "lineno": 22, "outcome": "failed", "keywords": ["test_ws_broadcast_multiple_clients", "asyncio", "pytestmark", "tests/test_untested_scenarios.py", "test-harness"], "setup": {"duration": 0.00154498799747671, "outcome": "passed"}, "call": {"duration": 1.0078223479977169, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "traceback": [{"path": "tests/test_untested_scenarios.py", "lineno": 45, "message": "in test_ws_broadcast_multiple_clients"}, {"path": "tests/test_untested_scenarios.py", "lineno": 28, "message": "in listen"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 629, "message": "in __aenter__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 647, "message": "in __await_impl_timeout__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 654, "message": "in __await_impl__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "in handshake"}], "longrepr": "tests/test_untested_scenarios.py:45: in test_ws_broadcast_multiple_clients\n    results = await asyncio.gather(*tasks)\ntests/test_untested_scenarios.py:28: in listen\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "teardown": {"duration": 0.0010431629998493008, "outcome": "passed"}}, {"nodeid": "tests/test_untested_scenarios.py::test_graceful_shutdown_with_clients", "lineno": 47, "outcome": "failed", "keywords": ["test_graceful_shutdown_with_clients", "asyncio", "pytestmark", "tests/test_untested_scenarios.py", "test-harness"], "setup": {"duration": 0.0004036350001115352, "outcome": "passed"}, "call": {"duration": 0.002190180999605218, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "traceback": [{"path": "tests/test_untested_scenarios.py", "lineno": 52, "message": "in test_graceful_shutdown_with_clients"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 629, "message": "in __aenter__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 647, "message": "in __await_impl_timeout__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 654, "message": "in __await_impl__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "in handshake"}], "longrepr": "tests/test_untested_scenarios.py:52: in test_graceful_shutdown_with_clients\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "teardown": {"duration": 0.0015790549987286795, "outcome": "passed"}}, {"nodeid": "tests/test_websockets.py::test_websocket_connection", "lineno": 6, "outcome": "failed", "keywords": ["test_websocket_connection", "asyncio", "websocket", "pytestmark", "tests/test_websockets.py", "test-harness"], "setup": {"duration": 0.001426971000910271, "outcome": "passed"}, "call": {"duration": 0.0019147229977534153, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "traceback": [{"path": "tests/test_websockets.py", "lineno": 12, "message": "in test_websocket_connection"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 629, "message": "in __aenter__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 647, "message": "in __await_impl_timeout__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 654, "message": "in __await_impl__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "in handshake"}], "longrepr": "tests/test_websockets.py:12: in test_websocket_connection\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "teardown": {"duration": 0.00036173199987388216, "outcome": "passed"}}, {"nodeid": "tests/test_websockets.py::test_websocket_receives_events", "lineno": 21, "outcome": "failed", "keywords": ["test_websocket_receives_events", "asyncio", "websocket", "pytestmark", "tests/test_websockets.py", "test-harness"], "setup": {"duration": 0.00132295599905774, "outcome": "passed"}, "call": {"duration": 0.007343190001847688, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "traceback": [{"path": "tests/test_websockets.py", "lineno": 27, "message": "in test_websocket_receives_events"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 629, "message": "in __aenter__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 647, "message": "in __await_impl_timeout__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 654, "message": "in __await_impl__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "in handshake"}], "longrepr": "tests/test_websockets.py:27: in test_websocket_receives_events\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "teardown": {"duration": 0.0003867699997499585, "outcome": "passed"}}, {"nodeid": "tests/test_websockets.py::test_websocket_multiple_clients_broadcast", "lineno": 56, "outcome": "failed", "keywords": ["test_websocket_multiple_clients_broadcast", "asyncio", "websocket", "pytestmark", "tests/test_websockets.py", "test-harness"], "setup": {"duration": 0.000322504998621298, "outcome": "passed"}, "call": {"duration": 1.0119882399994822, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py", "lineno": 95, "message": "assert 0 == 3\n +  where 0 = len([])"}, "traceback": [{"path": "tests/test_websockets.py", "lineno": 95, "message": "in test_websocket_multiple_clients_broadcast"}], "longrepr": "tests/test_websockets.py:95: in test_websocket_multiple_clients_broadcast\n    assert len(successful_results) == num_clients\nE   assert 0 == 3\nE    +  where 0 = len([])"}, "teardown": {"duration": 0.0003643099989858456, "outcome": "passed"}}, {"nodeid": "tests/test_websockets.py::test_websocket_client_disconnect", "lineno": 101, "outcome": "failed", "keywords": ["test_websocket_client_disconnect", "asyncio", "websocket", "pytestmark", "tests/test_websockets.py", "test-harness"], "setup": {"duration": 0.0004989010012650397, "outcome": "passed"}, "call": {"duration": 0.0018679519998840988, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "traceback": [{"path": "tests/test_websockets.py", "lineno": 108, "message": "in test_websocket_client_disconnect"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 629, "message": "in __aenter__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 647, "message": "in __await_impl_timeout__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 654, "message": "in __await_impl__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "in handshake"}], "longrepr": "tests/test_websockets.py:108: in test_websocket_client_disconnect\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "teardown": {"duration": 0.0003493710028124042, "outcome": "passed"}}, {"nodeid": "tests/test_websockets.py::test_websocket_connection_timeout", "lineno": 131, "outcome": "failed", "keywords": ["test_websocket_connection_timeout", "asyncio", "websocket", "pytestmark", "tests/test_websockets.py", "test-harness"], "setup": {"duration": 0.0002711609995458275, "outcome": "passed"}, "call": {"duration": 0.0018260569995618425, "outcome": "failed", "crash": {"path": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "traceback": [{"path": "tests/test_websockets.py", "lineno": 139, "message": "in test_websocket_connection_timeout"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 629, "message": "in __aenter__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 647, "message": "in __await_impl_timeout__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 654, "message": "in __await_impl__"}, {"path": "test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 325, "message": "in handshake"}], "longrepr": "tests/test_websockets.py:139: in test_websocket_connection_timeout\n    async with websockets.connect(uri, timeout=1) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403"}, "teardown": {"duration": 0.00037684499693568796, "outcome": "passed"}}], "warnings": [{"message": "Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 18}, {"message": "Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 56}, {"message": "Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 88}, {"message": "Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py", "lineno": 114}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 6}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 45}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 54}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 72}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 81}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 99}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 113}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 130}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 143}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 175}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 193}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 205}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 217}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 230}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 243}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 269}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py", "lineno": 295}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py", "lineno": 5}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py", "lineno": 12}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py", "lineno": 31}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py", "lineno": 38}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 7}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 33}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 46}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 55}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 76}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 88}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 101}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 120}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 128}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py", "lineno": 142}, {"message": "Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_untested_scenarios.py", "lineno": 8}, {"message": "Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py", "lineno": 7}, {"message": "Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py", "lineno": 22}, {"message": "Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py", "lineno": 57}, {"message": "Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py", "lineno": 102}, {"message": "Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html", "category": "PytestUnknownMarkWarning", "when": "collect", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py", "lineno": 132}, {"message": "rename timeout to close_timeout", "category": "DeprecationWarning", "when": "runtest", "filename": "/home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py", "lineno": 453}]}