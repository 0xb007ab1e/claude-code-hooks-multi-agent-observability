{
  "timestamp": "2025-07-14T23:59:57.777803",
  "duration": 6.2084150314331055,
  "total_suites": 5,
  "passed_suites": 0,
  "failed_suites": 5,
  "success_rate": 0.0,
  "server_image": null,
  "branch": null,
  "results": {
    "REST API Tests": {
      "command": "python -m pytest tests/test_rest_api.py -v --tb=short --html=reports/report.html --self-contained-html --json-report --json-report-file=reports/report.json",
      "return_code": 1,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.11.2, pytest-7.4.3, pluggy-1.6.0 -- /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/bin/python\ncachedir: .pytest_cache\nmetadata: {'Python': '3.11.2', 'Platform': 'Linux-6.12.32-amd64-x86_64-with-glibc2.36', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.5.0', 'metadata': '3.1.1', 'asyncio': '0.21.1', 'html': '4.1.1', 'json-report': '1.5.0', 'anyio': '4.9.0'}}\nrootdir: /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness\nconfigfile: pytest.ini\nplugins: xdist-3.5.0, metadata-3.1.1, asyncio-0.21.1, html-4.1.1, json-report-1.5.0, anyio-4.9.0\nasyncio: mode=Mode.STRICT\ncollecting ... collected 4 items\n\ntests/test_rest_api.py::test_root_endpoint FAILED                        [ 25%]\ntests/test_rest_api.py::test_event_endpoint FAILED                       [ 50%]\ntests/test_rest_api.py::test_recent_events_endpoint PASSED               [ 75%]\ntests/test_rest_api.py::test_filter_options_endpoint PASSED              [100%]\n\n=================================== FAILURES ===================================\n______________________________ test_root_endpoint ______________________________\ntests/test_rest_api.py:10: in test_root_endpoint\n    assert response.text == \"Multi-Agent Observability Server\"\nE   assert '\"Multi-Agent...ility Server\"' == 'Multi-Agent ...bility Server'\nE     - Multi-Agent Observability Server\nE     + \"Multi-Agent Observability Server\"\nE     ? +                                +\n_____________________________ test_event_endpoint ______________________________\ntests/test_rest_api.py:24: in test_event_endpoint\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n=============================== warnings summary ===============================\ntests/test_rest_api.py:5\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:5: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_rest_api.py:12\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:12: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_rest_api.py:31\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:31: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_rest_api.py:38\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:38: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ----------------------------------\nreport saved to: reports/report.json\n- Generated html report: file:///home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/reports/report.html -\n=========================== short test summary info ============================\nFAILED tests/test_rest_api.py::test_root_endpoint - assert '\"Multi-Agent...il...\nFAILED tests/test_rest_api.py::test_event_endpoint - assert 400 == 200\n=================== 2 failed, 2 passed, 4 warnings in 0.14s ====================\n",
      "stderr": "",
      "duration": 0.4071311950683594,
      "success": false
    },
    "WebSocket Tests": {
      "command": "python -m pytest tests/test_websockets.py -v --tb=short --html=reports/report.html --self-contained-html --json-report --json-report-file=reports/report.json",
      "return_code": 1,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.11.2, pytest-7.4.3, pluggy-1.6.0 -- /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/bin/python\ncachedir: .pytest_cache\nmetadata: {'Python': '3.11.2', 'Platform': 'Linux-6.12.32-amd64-x86_64-with-glibc2.36', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.5.0', 'metadata': '3.1.1', 'asyncio': '0.21.1', 'html': '4.1.1', 'json-report': '1.5.0', 'anyio': '4.9.0'}}\nrootdir: /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness\nconfigfile: pytest.ini\nplugins: xdist-3.5.0, metadata-3.1.1, asyncio-0.21.1, html-4.1.1, json-report-1.5.0, anyio-4.9.0\nasyncio: mode=Mode.STRICT\ncollecting ... collected 5 items\n\ntests/test_websockets.py::test_websocket_connection FAILED               [ 20%]\ntests/test_websockets.py::test_websocket_receives_events FAILED          [ 40%]\ntests/test_websockets.py::test_websocket_multiple_clients_broadcast FAILED [ 60%]\ntests/test_websockets.py::test_websocket_client_disconnect FAILED        [ 80%]\ntests/test_websockets.py::test_websocket_connection_timeout FAILED       [100%]\n\n=================================== FAILURES ===================================\n__________________________ test_websocket_connection ___________________________\ntests/test_websockets.py:12: in test_websocket_connection\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n________________________ test_websocket_receives_events ________________________\ntests/test_websockets.py:27: in test_websocket_receives_events\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n__________________ test_websocket_multiple_clients_broadcast ___________________\ntests/test_websockets.py:95: in test_websocket_multiple_clients_broadcast\n    assert len(successful_results) == num_clients\nE   assert 0 == 3\nE    +  where 0 = len([])\n_______________________ test_websocket_client_disconnect _______________________\ntests/test_websockets.py:108: in test_websocket_client_disconnect\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n______________________ test_websocket_connection_timeout _______________________\ntests/test_websockets.py:139: in test_websocket_connection_timeout\n    async with websockets.connect(uri, timeout=1) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n=============================== warnings summary ===============================\ntests/test_websockets.py:7\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:7: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:22\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:22: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:57\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:57: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:102\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:102: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:132\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:132: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py::test_websocket_connection_timeout\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py:453: DeprecationWarning: rename timeout to close_timeout\n    warnings.warn(\"rename timeout to close_timeout\", DeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ----------------------------------\nreport saved to: reports/report.json\n- Generated html report: file:///home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/reports/report.html -\n=========================== short test summary info ============================\nFAILED tests/test_websockets.py::test_websocket_connection - websockets.excep...\nFAILED tests/test_websockets.py::test_websocket_receives_events - websockets....\nFAILED tests/test_websockets.py::test_websocket_multiple_clients_broadcast - ...\nFAILED tests/test_websockets.py::test_websocket_client_disconnect - websocket...\nFAILED tests/test_websockets.py::test_websocket_connection_timeout - websocke...\n======================== 5 failed, 6 warnings in 1.20s =========================\n",
      "stderr": "",
      "duration": 1.467301845550537,
      "success": false
    },
    "Database Tests": {
      "command": "python -m pytest tests/test_database.py -v --tb=short --html=reports/report.html --self-contained-html --json-report --json-report-file=reports/report.json",
      "return_code": 1,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.11.2, pytest-7.4.3, pluggy-1.6.0 -- /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/bin/python\ncachedir: .pytest_cache\nmetadata: {'Python': '3.11.2', 'Platform': 'Linux-6.12.32-amd64-x86_64-with-glibc2.36', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.5.0', 'metadata': '3.1.1', 'asyncio': '0.21.1', 'html': '4.1.1', 'json-report': '1.5.0', 'anyio': '4.9.0'}}\nrootdir: /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness\nconfigfile: pytest.ini\nplugins: xdist-3.5.0, metadata-3.1.1, asyncio-0.21.1, html-4.1.1, json-report-1.5.0, anyio-4.9.0\nasyncio: mode=Mode.STRICT\ncollecting ... collected 4 items\n\ntests/test_database.py::test_sqlite_event_storage FAILED                 [ 25%]\ntests/test_database.py::test_postgres_event_storage FAILED               [ 50%]\ntests/test_database.py::test_mongo_event_storage FAILED                  [ 75%]\ntests/test_database.py::test_event_count_increment FAILED                [100%]\n\n=================================== FAILURES ===================================\n__________________________ test_sqlite_event_storage ___________________________\ntests/test_database.py:28: in test_sqlite_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n_________________________ test_postgres_event_storage __________________________\ntests/test_database.py:67: in test_postgres_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n___________________________ test_mongo_event_storage ___________________________\ntests/test_database.py:99: in test_mongo_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n__________________________ test_event_count_increment __________________________\ntests/test_database.py:128: in test_event_count_increment\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n=============================== warnings summary ===============================\ntests/test_database.py:18\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:18: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\ntests/test_database.py:56\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:56: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\ntests/test_database.py:88\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:88: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\ntests/test_database.py:114\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:114: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ----------------------------------\nreport saved to: reports/report.json\n- Generated html report: file:///home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/reports/report.html -\n=========================== short test summary info ============================\nFAILED tests/test_database.py::test_sqlite_event_storage - assert 400 == 200\nFAILED tests/test_database.py::test_postgres_event_storage - assert 400 == 200\nFAILED tests/test_database.py::test_mongo_event_storage - assert 400 == 200\nFAILED tests/test_database.py::test_event_count_increment - assert 400 == 200\n======================== 4 failed, 4 warnings in 0.17s =========================\n",
      "stderr": "",
      "duration": 0.47684192657470703,
      "success": false
    },
    "Edge Case Tests": {
      "command": "python -m pytest tests/test_edge_cases.py -v --tb=short --html=reports/report.html --self-contained-html --json-report --json-report-file=reports/report.json",
      "return_code": 1,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.11.2, pytest-7.4.3, pluggy-1.6.0 -- /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/bin/python\ncachedir: .pytest_cache\nmetadata: {'Python': '3.11.2', 'Platform': 'Linux-6.12.32-amd64-x86_64-with-glibc2.36', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.5.0', 'metadata': '3.1.1', 'asyncio': '0.21.1', 'html': '4.1.1', 'json-report': '1.5.0', 'anyio': '4.9.0'}}\nrootdir: /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness\nconfigfile: pytest.ini\nplugins: xdist-3.5.0, metadata-3.1.1, asyncio-0.21.1, html-4.1.1, json-report-1.5.0, anyio-4.9.0\nasyncio: mode=Mode.STRICT\ncollecting ... collected 17 items\n\ntests/test_edge_cases.py::test_invalid_event_missing_fields FAILED       [  5%]\ntests/test_edge_cases.py::test_malformed_json FAILED                     [ 11%]\ntests/test_edge_cases.py::test_recent_events_with_limit PASSED           [ 17%]\ntests/test_edge_cases.py::test_cors_headers FAILED                       [ 23%]\ntests/test_edge_cases.py::test_unsupported_methods FAILED                [ 29%]\ntests/test_edge_cases.py::test_large_payload FAILED                      [ 35%]\ntests/test_edge_cases.py::test_special_characters FAILED                 [ 41%]\ntests/test_edge_cases.py::test_empty_payload FAILED                      [ 47%]\ntests/test_edge_cases.py::test_concurrent_requests FAILED                [ 52%]\ntests/test_edge_cases.py::test_performance_timing FAILED                 [ 58%]\ntests/test_edge_cases.py::test_null_payload FAILED                       [ 64%]\ntests/test_edge_cases.py::test_invalid_hook_event_type PASSED            [ 70%]\ntests/test_edge_cases.py::test_extremely_large_payload FAILED            [ 76%]\ntests/test_edge_cases.py::test_invalid_content_type FAILED               [ 82%]\ntests/test_edge_cases.py::test_nested_json_payload FAILED                [ 88%]\ntests/test_edge_cases.py::test_pagination_with_offset FAILED             [ 94%]\ntests/test_edge_cases.py::test_database_connection_error FAILED          [100%]\n\n=================================== FAILURES ===================================\n______________________ test_invalid_event_missing_fields _______________________\ntests/test_edge_cases.py:15: in test_invalid_event_missing_fields\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code\n_____________________________ test_malformed_json ______________________________\ntests/test_edge_cases.py:51: in test_malformed_json\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code\n______________________________ test_cors_headers _______________________________\ntests/test_edge_cases.py:77: in test_cors_headers\n    assert \"Access-Control-Allow-Origin\" in response.headers\nE   AssertionError: assert 'Access-Control-Allow-Origin' in {'date': 'Tue, 15 Jul 2025 04:59:59 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'}\nE    +  where {'date': 'Tue, 15 Jul 2025 04:59:59 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'} = <Response [200]>.headers\n___________________________ test_unsupported_methods ___________________________\ntests/test_edge_cases.py:91: in test_unsupported_methods\n    assert response.status_code == 200  # Server returns default response\nE   assert 405 == 200\nE    +  where 405 = <Response [405]>.status_code\n______________________________ test_large_payload ______________________________\ntests/test_edge_cases.py:109: in test_large_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n___________________________ test_special_characters ____________________________\ntests/test_edge_cases.py:126: in test_special_characters\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n______________________________ test_empty_payload ______________________________\ntests/test_edge_cases.py:139: in test_empty_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n___________________________ test_concurrent_requests ___________________________\ntests/test_edge_cases.py:172: in test_concurrent_requests\n    assert all(status == 200 for status in results)\nE   assert False\nE    +  where False = all(<generator object test_concurrent_requests.<locals>.<genexpr> at 0x7f0203655cb0>)\n___________________________ test_performance_timing ____________________________\ntests/test_edge_cases.py:189: in test_performance_timing\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n______________________________ test_null_payload _______________________________\ntests/test_edge_cases.py:203: in test_null_payload\n    assert response.status_code in [200, 400]\nE   assert 422 in [200, 400]\nE    +  where 422 = <Response [422]>.status_code\n_________________________ test_extremely_large_payload _________________________\ntests/test_edge_cases.py:228: in test_extremely_large_payload\n    assert response.status_code in [200, 413]\nE   assert 400 in [200, 413]\nE    +  where 400 = <Response [400]>.status_code\n__________________________ test_invalid_content_type ___________________________\ntests/test_edge_cases.py:241: in test_invalid_content_type\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code\n___________________________ test_nested_json_payload ___________________________\ntests/test_edge_cases.py:265: in test_nested_json_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n_________________________ test_pagination_with_offset __________________________\ntests/test_edge_cases.py:293: in test_pagination_with_offset\n    assert events1[0] != events2[0]\nE   AssertionError: assert {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 137, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...} != {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 137, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...}\n________________________ test_database_connection_error ________________________\ntests/test_edge_cases.py:307: in test_database_connection_error\n    assert response.status_code in [200, 500]\nE   assert 400 in [200, 500]\nE    +  where 400 = <Response [400]>.status_code\n=============================== warnings summary ===============================\ntests/test_edge_cases.py:6\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:6: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:45\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:45: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:54\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:54: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:72\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:72: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:81\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:81: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:99\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:99: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:113\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:113: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:130\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:130: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:143\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:143: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:175\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:175: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:193\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:193: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:205\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:205: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:217\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:217: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:230\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:230: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:243\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:243: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:269\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:269: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:295\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:295: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ----------------------------------\nreport saved to: reports/report.json\n- Generated html report: file:///home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/reports/report.html -\n=========================== short test summary info ============================\nFAILED tests/test_edge_cases.py::test_invalid_event_missing_fields - assert 4...\nFAILED tests/test_edge_cases.py::test_malformed_json - assert 422 == 400\nFAILED tests/test_edge_cases.py::test_cors_headers - AssertionError: assert '...\nFAILED tests/test_edge_cases.py::test_unsupported_methods - assert 405 == 200\nFAILED tests/test_edge_cases.py::test_large_payload - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_special_characters - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_empty_payload - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_concurrent_requests - assert False\nFAILED tests/test_edge_cases.py::test_performance_timing - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_null_payload - assert 422 in [200, 400]\nFAILED tests/test_edge_cases.py::test_extremely_large_payload - assert 400 in...\nFAILED tests/test_edge_cases.py::test_invalid_content_type - assert 422 == 400\nFAILED tests/test_edge_cases.py::test_nested_json_payload - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_pagination_with_offset - AssertionError...\nFAILED tests/test_edge_cases.py::test_database_connection_error - assert 400 ...\n================== 15 failed, 2 passed, 17 warnings in 0.37s ===================\n",
      "stderr": "",
      "duration": 0.6379497051239014,
      "success": false
    },
    "Integration Tests": {
      "command": "python -m pytest tests/ -v --tb=short --html=reports/report.html --self-contained-html --json-report --json-report-file=reports/report.json",
      "return_code": 1,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.11.2, pytest-7.4.3, pluggy-1.6.0 -- /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/bin/python\ncachedir: .pytest_cache\nmetadata: {'Python': '3.11.2', 'Platform': 'Linux-6.12.32-amd64-x86_64-with-glibc2.36', 'Packages': {'pytest': '7.4.3', 'pluggy': '1.6.0'}, 'Plugins': {'xdist': '3.5.0', 'metadata': '3.1.1', 'asyncio': '0.21.1', 'html': '4.1.1', 'json-report': '1.5.0', 'anyio': '4.9.0'}}\nrootdir: /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness\nconfigfile: pytest.ini\nplugins: xdist-3.5.0, metadata-3.1.1, asyncio-0.21.1, html-4.1.1, json-report-1.5.0, anyio-4.9.0\nasyncio: mode=Mode.STRICT\ncollecting ... collected 43 items\n\ntests/test_database.py::test_sqlite_event_storage FAILED                 [  2%]\ntests/test_database.py::test_postgres_event_storage FAILED               [  4%]\ntests/test_database.py::test_mongo_event_storage FAILED                  [  6%]\ntests/test_database.py::test_event_count_increment FAILED                [  9%]\ntests/test_edge_cases.py::test_invalid_event_missing_fields FAILED       [ 11%]\ntests/test_edge_cases.py::test_malformed_json FAILED                     [ 13%]\ntests/test_edge_cases.py::test_recent_events_with_limit PASSED           [ 16%]\ntests/test_edge_cases.py::test_cors_headers FAILED                       [ 18%]\ntests/test_edge_cases.py::test_unsupported_methods FAILED                [ 20%]\ntests/test_edge_cases.py::test_large_payload FAILED                      [ 23%]\ntests/test_edge_cases.py::test_special_characters FAILED                 [ 25%]\ntests/test_edge_cases.py::test_empty_payload FAILED                      [ 27%]\ntests/test_edge_cases.py::test_concurrent_requests FAILED                [ 30%]\ntests/test_edge_cases.py::test_performance_timing FAILED                 [ 32%]\ntests/test_edge_cases.py::test_null_payload FAILED                       [ 34%]\ntests/test_edge_cases.py::test_invalid_hook_event_type PASSED            [ 37%]\ntests/test_edge_cases.py::test_extremely_large_payload FAILED            [ 39%]\ntests/test_edge_cases.py::test_invalid_content_type FAILED               [ 41%]\ntests/test_edge_cases.py::test_nested_json_payload FAILED                [ 44%]\ntests/test_edge_cases.py::test_pagination_with_offset FAILED             [ 46%]\ntests/test_edge_cases.py::test_database_connection_error FAILED          [ 48%]\ntests/test_rest_api.py::test_root_endpoint FAILED                        [ 51%]\ntests/test_rest_api.py::test_event_endpoint FAILED                       [ 53%]\ntests/test_rest_api.py::test_recent_events_endpoint PASSED               [ 55%]\ntests/test_rest_api.py::test_filter_options_endpoint PASSED              [ 58%]\ntests/test_themes_api.py::test_create_theme FAILED                       [ 60%]\ntests/test_themes_api.py::test_get_theme FAILED                          [ 62%]\ntests/test_themes_api.py::test_search_themes FAILED                      [ 65%]\ntests/test_themes_api.py::test_update_theme FAILED                       [ 67%]\ntests/test_themes_api.py::test_delete_theme FAILED                       [ 69%]\ntests/test_themes_api.py::test_export_theme FAILED                       [ 72%]\ntests/test_themes_api.py::test_import_theme FAILED                       [ 74%]\ntests/test_themes_api.py::test_theme_stats FAILED                        [ 76%]\ntests/test_themes_api.py::test_theme_validation FAILED                   [ 79%]\ntests/test_themes_api.py::test_theme_not_found FAILED                    [ 81%]\ntests/test_untested_scenarios.py::test_ratelimit_429 FAILED              [ 83%]\ntests/test_untested_scenarios.py::test_ws_broadcast_multiple_clients FAILED [ 86%]\ntests/test_untested_scenarios.py::test_graceful_shutdown_with_clients FAILED [ 88%]\ntests/test_websockets.py::test_websocket_connection FAILED               [ 90%]\ntests/test_websockets.py::test_websocket_receives_events FAILED          [ 93%]\ntests/test_websockets.py::test_websocket_multiple_clients_broadcast FAILED [ 95%]\ntests/test_websockets.py::test_websocket_client_disconnect FAILED        [ 97%]\ntests/test_websockets.py::test_websocket_connection_timeout FAILED       [100%]\n\n=================================== FAILURES ===================================\n__________________________ test_sqlite_event_storage ___________________________\ntests/test_database.py:28: in test_sqlite_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n_________________________ test_postgres_event_storage __________________________\ntests/test_database.py:67: in test_postgres_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n___________________________ test_mongo_event_storage ___________________________\ntests/test_database.py:99: in test_mongo_event_storage\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n__________________________ test_event_count_increment __________________________\ntests/test_database.py:128: in test_event_count_increment\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n______________________ test_invalid_event_missing_fields _______________________\ntests/test_edge_cases.py:15: in test_invalid_event_missing_fields\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code\n_____________________________ test_malformed_json ______________________________\ntests/test_edge_cases.py:51: in test_malformed_json\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code\n______________________________ test_cors_headers _______________________________\ntests/test_edge_cases.py:77: in test_cors_headers\n    assert \"Access-Control-Allow-Origin\" in response.headers\nE   AssertionError: assert 'Access-Control-Allow-Origin' in {'date': 'Tue, 15 Jul 2025 05:00:00 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'}\nE    +  where {'date': 'Tue, 15 Jul 2025 05:00:00 GMT', 'server': 'uvicorn', 'content-length': '177', 'content-type': 'application/json'} = <Response [200]>.headers\n___________________________ test_unsupported_methods ___________________________\ntests/test_edge_cases.py:91: in test_unsupported_methods\n    assert response.status_code == 200  # Server returns default response\nE   assert 405 == 200\nE    +  where 405 = <Response [405]>.status_code\n______________________________ test_large_payload ______________________________\ntests/test_edge_cases.py:109: in test_large_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n___________________________ test_special_characters ____________________________\ntests/test_edge_cases.py:126: in test_special_characters\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n______________________________ test_empty_payload ______________________________\ntests/test_edge_cases.py:139: in test_empty_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n___________________________ test_concurrent_requests ___________________________\ntests/test_edge_cases.py:172: in test_concurrent_requests\n    assert all(status == 200 for status in results)\nE   assert False\nE    +  where False = all(<generator object test_concurrent_requests.<locals>.<genexpr> at 0x7f7e4917ab50>)\n___________________________ test_performance_timing ____________________________\ntests/test_edge_cases.py:189: in test_performance_timing\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n______________________________ test_null_payload _______________________________\ntests/test_edge_cases.py:203: in test_null_payload\n    assert response.status_code in [200, 400]\nE   assert 422 in [200, 400]\nE    +  where 422 = <Response [422]>.status_code\n_________________________ test_extremely_large_payload _________________________\ntests/test_edge_cases.py:228: in test_extremely_large_payload\n    assert response.status_code in [200, 413]\nE   assert 400 in [200, 413]\nE    +  where 400 = <Response [400]>.status_code\n__________________________ test_invalid_content_type ___________________________\ntests/test_edge_cases.py:241: in test_invalid_content_type\n    assert response.status_code == 400\nE   assert 422 == 400\nE    +  where 422 = <Response [422]>.status_code\n___________________________ test_nested_json_payload ___________________________\ntests/test_edge_cases.py:265: in test_nested_json_payload\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n_________________________ test_pagination_with_offset __________________________\ntests/test_edge_cases.py:293: in test_pagination_with_offset\n    assert events1[0] != events2[0]\nE   AssertionError: assert {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 174, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...} != {'chat': None, 'hook_event_type': 'PreToolUse', 'id': 174, 'payload': {'command': 'test 9', 'tool': 'Test'}, ...}\n________________________ test_database_connection_error ________________________\ntests/test_edge_cases.py:307: in test_database_connection_error\n    assert response.status_code in [200, 500]\nE   assert 400 in [200, 500]\nE    +  where 400 = <Response [400]>.status_code\n______________________________ test_root_endpoint ______________________________\ntests/test_rest_api.py:10: in test_root_endpoint\n    assert response.text == \"Multi-Agent Observability Server\"\nE   assert '\"Multi-Agent...ility Server\"' == 'Multi-Agent ...bility Server'\nE     - Multi-Agent Observability Server\nE     + \"Multi-Agent Observability Server\"\nE     ? +                                +\n_____________________________ test_event_endpoint ______________________________\ntests/test_rest_api.py:24: in test_event_endpoint\n    assert response.status_code == 200\nE   assert 400 == 200\nE    +  where 400 = <Response [400]>.status_code\n______________________________ test_create_theme _______________________________\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code\n________________________________ test_get_theme ________________________________\ntests/test_themes_api.py:37: in test_get_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code\n______________________________ test_search_themes ______________________________\ntests/test_themes_api.py:50: in test_search_themes\n    assert response.status_code == 200\nE   assert 404 == 200\nE    +  where 404 = <Response [404]>.status_code\n______________________________ test_update_theme _______________________________\ntests/test_themes_api.py:59: in test_update_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code\n______________________________ test_delete_theme _______________________________\ntests/test_themes_api.py:80: in test_delete_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code\n______________________________ test_export_theme _______________________________\ntests/test_themes_api.py:92: in test_export_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code\n______________________________ test_import_theme _______________________________\ntests/test_themes_api.py:105: in test_import_theme\n    theme_id = test_create_theme()\ntests/test_themes_api.py:26: in test_create_theme\n    assert response.status_code == 201\nE   assert 404 == 201\nE    +  where 404 = <Response [404]>.status_code\n_______________________________ test_theme_stats _______________________________\ntests/test_themes_api.py:124: in test_theme_stats\n    assert response.status_code == 200\nE   assert 404 == 200\nE    +  where 404 = <Response [404]>.status_code\n____________________________ test_theme_validation _____________________________\ntests/test_themes_api.py:138: in test_theme_validation\n    assert response.status_code == 400\nE   assert 404 == 400\nE    +  where 404 = <Response [404]>.status_code\n_____________________________ test_theme_not_found _____________________________\ntests/test_themes_api.py:148: in test_theme_not_found\n    assert response_data[\"success\"] is False\nE   KeyError: 'success'\n______________________________ test_ratelimit_429 ______________________________\ntests/test_untested_scenarios.py:21: in test_ratelimit_429\n    assert response.status_code == 429\nE   assert 400 == 429\nE    +  where 400 = <Response [400]>.status_code\n______________________ test_ws_broadcast_multiple_clients ______________________\ntests/test_untested_scenarios.py:45: in test_ws_broadcast_multiple_clients\n    results = await asyncio.gather(*tasks)\ntests/test_untested_scenarios.py:28: in listen\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n_____________________ test_graceful_shutdown_with_clients ______________________\ntests/test_untested_scenarios.py:52: in test_graceful_shutdown_with_clients\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n__________________________ test_websocket_connection ___________________________\ntests/test_websockets.py:12: in test_websocket_connection\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n________________________ test_websocket_receives_events ________________________\ntests/test_websockets.py:27: in test_websocket_receives_events\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n__________________ test_websocket_multiple_clients_broadcast ___________________\ntests/test_websockets.py:95: in test_websocket_multiple_clients_broadcast\n    assert len(successful_results) == num_clients\nE   assert 0 == 3\nE    +  where 0 = len([])\n_______________________ test_websocket_client_disconnect _______________________\ntests/test_websockets.py:108: in test_websocket_client_disconnect\n    async with websockets.connect(uri) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n______________________ test_websocket_connection_timeout _______________________\ntests/test_websockets.py:139: in test_websocket_connection_timeout\n    async with websockets.connect(uri, timeout=1) as websocket:\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:629: in __aenter__\n    return await self\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:647: in __await_impl_timeout__\n    return await self.__await_impl__()\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:654: in __await_impl__\n    await protocol.handshake(\ntest-env/lib/python3.11/site-packages/websockets/legacy/client.py:325: in handshake\n    raise InvalidStatusCode(status_code, response_headers)\nE   websockets.exceptions.InvalidStatusCode: server rejected WebSocket connection: HTTP 403\n=============================== warnings summary ===============================\ntests/test_database.py:18\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:18: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\ntests/test_database.py:56\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:56: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\ntests/test_database.py:88\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:88: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\ntests/test_database.py:114\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_database.py:114: PytestUnknownMarkWarning: Unknown pytest.mark.db - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.db\n\ntests/test_edge_cases.py:6\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:6: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:45\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:45: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:54\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:54: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:72\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:72: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:81\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:81: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:99\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:99: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:113\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:113: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:130\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:130: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:143\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:143: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:175\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:175: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:193\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:193: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:205\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:205: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:217\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:217: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:230\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:230: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:243\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:243: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:269\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:269: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_edge_cases.py:295\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_edge_cases.py:295: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_rest_api.py:5\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:5: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_rest_api.py:12\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:12: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_rest_api.py:31\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:31: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_rest_api.py:38\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_rest_api.py:38: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:7\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:7: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:33\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:33: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:46\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:46: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:55\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:55: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:76\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:76: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:88\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:88: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:101\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:101: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:120\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:120: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:128\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:128: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_themes_api.py:142\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_themes_api.py:142: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_untested_scenarios.py:8\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_untested_scenarios.py:8: PytestUnknownMarkWarning: Unknown pytest.mark.rest - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.rest\n\ntests/test_websockets.py:7\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:7: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:22\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:22: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:57\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:57: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:102\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:102: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py:132\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/tests/test_websockets.py:132: PytestUnknownMarkWarning: Unknown pytest.mark.websocket - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html\n    @pytest.mark.websocket\n\ntests/test_websockets.py::test_websocket_connection_timeout\n  /home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/test-env/lib/python3.11/site-packages/websockets/legacy/client.py:453: DeprecationWarning: rename timeout to close_timeout\n    warnings.warn(\"rename timeout to close_timeout\", DeprecationWarning)\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n--------------------------------- JSON report ----------------------------------\nreport saved to: reports/report.json\n- Generated html report: file:///home/b007ab1e/_src/claude/repos/claude-code-hooks-multi-agent-observability/test-harness/reports/report.html -\n=========================== short test summary info ============================\nFAILED tests/test_database.py::test_sqlite_event_storage - assert 400 == 200\nFAILED tests/test_database.py::test_postgres_event_storage - assert 400 == 200\nFAILED tests/test_database.py::test_mongo_event_storage - assert 400 == 200\nFAILED tests/test_database.py::test_event_count_increment - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_invalid_event_missing_fields - assert 4...\nFAILED tests/test_edge_cases.py::test_malformed_json - assert 422 == 400\nFAILED tests/test_edge_cases.py::test_cors_headers - AssertionError: assert '...\nFAILED tests/test_edge_cases.py::test_unsupported_methods - assert 405 == 200\nFAILED tests/test_edge_cases.py::test_large_payload - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_special_characters - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_empty_payload - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_concurrent_requests - assert False\nFAILED tests/test_edge_cases.py::test_performance_timing - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_null_payload - assert 422 in [200, 400]\nFAILED tests/test_edge_cases.py::test_extremely_large_payload - assert 400 in...\nFAILED tests/test_edge_cases.py::test_invalid_content_type - assert 422 == 400\nFAILED tests/test_edge_cases.py::test_nested_json_payload - assert 400 == 200\nFAILED tests/test_edge_cases.py::test_pagination_with_offset - AssertionError...\nFAILED tests/test_edge_cases.py::test_database_connection_error - assert 400 ...\nFAILED tests/test_rest_api.py::test_root_endpoint - assert '\"Multi-Agent...il...\nFAILED tests/test_rest_api.py::test_event_endpoint - assert 400 == 200\nFAILED tests/test_themes_api.py::test_create_theme - assert 404 == 201\nFAILED tests/test_themes_api.py::test_get_theme - assert 404 == 201\nFAILED tests/test_themes_api.py::test_search_themes - assert 404 == 200\nFAILED tests/test_themes_api.py::test_update_theme - assert 404 == 201\nFAILED tests/test_themes_api.py::test_delete_theme - assert 404 == 201\nFAILED tests/test_themes_api.py::test_export_theme - assert 404 == 201\nFAILED tests/test_themes_api.py::test_import_theme - assert 404 == 201\nFAILED tests/test_themes_api.py::test_theme_stats - assert 404 == 200\nFAILED tests/test_themes_api.py::test_theme_validation - assert 404 == 400\nFAILED tests/test_themes_api.py::test_theme_not_found - KeyError: 'success'\nFAILED tests/test_untested_scenarios.py::test_ratelimit_429 - assert 400 == 429\nFAILED tests/test_untested_scenarios.py::test_ws_broadcast_multiple_clients\nFAILED tests/test_untested_scenarios.py::test_graceful_shutdown_with_clients\nFAILED tests/test_websockets.py::test_websocket_connection - websockets.excep...\nFAILED tests/test_websockets.py::test_websocket_receives_events - websockets....\nFAILED tests/test_websockets.py::test_websocket_multiple_clients_broadcast - ...\nFAILED tests/test_websockets.py::test_websocket_client_disconnect - websocket...\nFAILED tests/test_websockets.py::test_websocket_connection_timeout - websocke...\n================== 39 failed, 4 passed, 42 warnings in 2.92s ===================\n",
      "stderr": "",
      "duration": 3.2191903591156006,
      "success": false
    }
  }
}